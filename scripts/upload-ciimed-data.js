// Script para subir informaci√≥n de CIIMED al RAG
// Ejecutar: node scripts/upload-ciimed-data.js

const ciimedInfo = {
  title: "CIIMED - Centro de Investigaci√≥n e Innovaci√≥n M√©dica - Informaci√≥n General",
  content: `
CENTRO DE INVESTIGACI√ìN E INNOVACI√ìN M√âDICA (CIIMED)

DESCRIPCI√ìN GENERAL
El Centro de Investigaci√≥n e Innovaci√≥n M√©dica (CIIMED) es una entidad dedicada a la creaci√≥n de soluciones innovadoras en salud basadas en evidencia cient√≠fica. Se enfoca en fortalecer la capacidad de investigaci√≥n biom√©dica y cl√≠nica en Panam√°, promoviendo la formaci√≥n de investigadores, la colaboraci√≥n con l√≠deres cient√≠ficos y la generaci√≥n de evidencia cient√≠fica relevante para la salud p√∫blica.

UBICACI√ìN Y COLABORACIONES
- Ubicado en el Hospital Nacional, Panam√°
- Colabora estrechamente con la Universidad de Panam√°
- Trabaja con diversas entidades p√∫blicas y acad√©micas del pa√≠s
- Mantiene alianzas estrat√©gicas entre sector p√∫blico y privado

√ÅREAS DE INVESTIGACI√ìN PRIORITARIAS
Las investigaciones del CIIMED est√°n alineadas con la Agenda Nacional de Prioridades de Investigaci√≥n para la Salud (ANPIS) e incluyen:

1. C√ÅNCER
   - Investigaci√≥n en prevenci√≥n, diagn√≥stico y tratamiento
   - Estudios epidemiol√≥gicos sobre incidencia en Panam√°

2. SALUD MENTAL
   - Investigaci√≥n en trastornos mentales prevalentes
   - Desarrollo de estrategias de intervenci√≥n comunitaria

3. NUEVAS TECNOLOG√çAS EN SALUD
   - Innovaci√≥n en dispositivos m√©dicos
   - Telemedicina y salud digital
   - Inteligencia artificial aplicada a diagn√≥sticos

4. ENFERMEDADES CR√ìNICAS NO TRANSMISIBLES
   - Diabetes, hipertensi√≥n, enfermedades cardiovasculares
   - Estrategias de prevenci√≥n y manejo

5. SALUD INFANTIL
   - Investigaci√≥n pedi√°trica
   - Nutrici√≥n y desarrollo infantil
   - Vacunaci√≥n y prevenci√≥n

6. ENFERMEDADES INFECCIOSAS
   - Medicina tropical
   - Enfermedades emergentes y reemergentes
   - Resistencia antimicrobiana

7. MEDICAMENTOS Y TERAPIAS FARMACOL√ìGICAS
   - Farmacovigilancia
   - Desarrollo de nuevos tratamientos
   - Estudios de eficacia y seguridad

SERVICIOS Y PROGRAMAS

FORMACI√ìN ACAD√âMICA
- Programas de pasant√≠as en investigaci√≥n cient√≠fica aplicada
- Dirigido especialmente a estudiantes de ciencias de la salud y medicina
- Entorno cl√≠nico de alta exigencia acad√©mica
- Integraci√≥n de estudiantes en proyectos de investigaci√≥n durante pr√°cticas cl√≠nico-cient√≠ficas

INVESTIGACI√ìN BIOM√âDICA Y CL√çNICA
- Investigaci√≥n aplicada con impacto directo en salud p√∫blica
- Proyectos colaborativos entre academia y pr√°ctica cl√≠nica
- Generaci√≥n de conocimiento desde la academia hacia la aplicaci√≥n pr√°ctica
- Participaci√≥n en estudios nacionales relevantes

CAPACITACI√ìN Y DESARROLLO
- Formaci√≥n de investigadores a trav√©s de alianzas estrat√©gicas
- Programas de mentor√≠a con l√≠deres cient√≠ficos
- Desarrollo de capacidades en metodolog√≠a de investigaci√≥n
- Talleres y seminarios especializados

PROYECTOS DESTACADOS
- Participaci√≥n en la Encuesta Nacional de Salud de Panam√° (ENSPA)
- Estudios epidemiol√≥gicos nacionales
- Proyectos de investigaci√≥n multic√©ntricos
- Colaboraciones internacionales en investigaci√≥n

INFORMACI√ìN DE CONTACTO

REDES SOCIALES
- Instagram oficial: @ciimedpanama
- Plataforma principal para difusi√≥n de actividades
- Comunicaci√≥n de resultados de investigaci√≥n
- Promoci√≥n de eventos y oportunidades

CONTACTO INSTITUCIONAL
- A trav√©s de la Universidad de Panam√°
- Por medio del Hospital Nacional
- Plataformas institucionales vinculadas

UBICACI√ìN F√çSICA
- Hospital Nacional
- Ciudad de la Salud, Panam√°
- Acceso a trav√©s de instalaciones hospitalarias

MISI√ìN Y VISI√ìN

MISI√ìN
Fortalecer la investigaci√≥n m√©dica temprana y aplicada en Panam√° a trav√©s de la colaboraci√≥n entre sector p√∫blico y privado, buscando impactar directamente en la salud p√∫blica mediante la generaci√≥n de evidencia cient√≠fica de calidad.

VISI√ìN
Ser el centro de referencia en investigaci√≥n e innovaci√≥n m√©dica en Panam√°, contribuyendo al desarrollo de soluciones de salud basadas en evidencia que respondan a las necesidades y prioridades nacionales.

CARACTER√çSTICAS DISTINTIVAS

ENFOQUE COLABORATIVO
- Trabajo conjunto entre sector p√∫blico y privado
- Integraci√≥n academia-hospital-comunidad
- Cooperaci√≥n interinstitucional nacional e internacional

EXIGENCIA ACAD√âMICA
- Ambiente riguroso de investigaci√≥n
- Est√°ndares internacionales de calidad
- Supervisi√≥n especializada en proyectos

ALINEACI√ìN CON POL√çTICAS NACIONALES
- Seguimiento de la Agenda Nacional de Prioridades de Investigaci√≥n para la Salud (ANPIS)
- Respuesta a necesidades reales del pa√≠s
- Contribuci√≥n a pol√≠ticas p√∫blicas de salud

IMPACTO EN SALUD P√öBLICA
- Investigaci√≥n orientada a soluciones pr√°cticas
- Transferencia de conocimiento a la pr√°ctica cl√≠nica
- Mejora de la atenci√≥n m√©dica nacional
- Fortalecimiento del sistema de salud paname√±o

OPORTUNIDADES PARA ESTUDIANTES E INVESTIGADORES
- Pasant√≠as de investigaci√≥n
- Proyectos de tesis y trabajos de grado
- Colaboraci√≥n en publicaciones cient√≠ficas
- Participaci√≥n en congresos y eventos acad√©micos
- Networking con investigadores experimentados

Para mayor informaci√≥n espec√≠fica sobre programas, requisitos de participaci√≥n o colaboraciones, se recomienda contactar directamente a trav√©s de las redes sociales oficiales (@ciimedpanama) o las plataformas institucionales de la Universidad de Panam√° y Hospital Nacional.
`,
  url: "https://www.instagram.com/ciimedpanama/",
  version: "1.0"
};

const contactInfo = {
  title: "CIIMED - Informaci√≥n de Contacto y Ubicaci√≥n",
  content: `
INFORMACI√ìN DE CONTACTO - CIIMED

REDES SOCIALES OFICIALES
Instagram: @ciimedpanama
- Canal principal de comunicaci√≥n
- Difusi√≥n de actividades de investigaci√≥n
- Noticias y actualizaciones del centro
- Oportunidades de participaci√≥n

UBICACI√ìN F√çSICA
Centro de Investigaci√≥n e Innovaci√≥n M√©dica (CIIMED)
Hospital Nacional
Ciudad de la Salud
Panam√°, Rep√∫blica de Panam√°

INSTITUCIONES ASOCIADAS
Universidad de Panam√°
- V√≠nculo acad√©mico principal
- Coordinaci√≥n de programas de formaci√≥n
- Gesti√≥n de proyectos de investigaci√≥n

Hospital Nacional
- Sede f√≠sica del centro
- Entorno cl√≠nico de investigaci√≥n
- Acceso a infraestructura m√©dica

C√ìMO CONTACTAR

Para informaci√≥n general:
- Seguir @ciimedpanama en Instagram
- Contactar a trav√©s de la Universidad de Panam√°
- Comunicarse via Hospital Nacional

Para estudiantes interesados:
- Consultar requisitos de pasant√≠as via @ciimedpanama
- Coordinaci√≥n a trav√©s de facultades de medicina
- Informaci√≥n sobre programas de formaci√≥n

Para investigadores y colaboraciones:
- Contacto institucional via Universidad de Panam√°
- Propuestas de colaboraci√≥n via Hospital Nacional
- Seguimiento en redes sociales para oportunidades

HORARIOS Y ACCESO
El acceso al CIIMED se coordina a trav√©s del Hospital Nacional y est√° sujeto a los protocolos institucionales correspondientes. Para visitas y reuniones, se recomienda coordinaci√≥n previa a trav√©s de los canales oficiales.

CORRESPONDENCIA
Para correspondencia oficial, dirigirse a:
- Universidad de Panam√° (coordinaci√≥n acad√©mica)
- Hospital Nacional (actividades cl√≠nicas)
- @ciimedpanama (consultas generales)
`,
  url: "https://www.instagram.com/ciimedpanama/",
  version: "1.0"
};

const researchPrograms = {
  title: "CIIMED - Programas de Investigaci√≥n y L√≠neas de Trabajo",
  content: `
PROGRAMAS DE INVESTIGACI√ìN - CIIMED

L√çNEAS DE INVESTIGACI√ìN PRIORITARIAS

1. INVESTIGACI√ìN EN C√ÅNCER
Objetivos:
- Estudios epidemiol√≥gicos sobre incidencia de c√°ncer en Panam√°
- Investigaci√≥n en factores de riesgo espec√≠ficos de la poblaci√≥n paname√±a
- Desarrollo de protocolos de prevenci√≥n y detecci√≥n temprana
- Evaluaci√≥n de tratamientos y seguimiento de pacientes

Proyectos actuales:
- Registro nacional de casos oncol√≥gicos
- Estudios de supervivencia por tipo de c√°ncer
- Investigaci√≥n en c√°ncer cervicouterino y de mama
- An√°lisis de factores ambientales y gen√©ticos

2. SALUD MENTAL
Enfoques:
- Investigaci√≥n en trastornos mentales prevalentes en Panam√°
- Desarrollo de estrategias de intervenci√≥n comunitaria
- Estudios sobre impacto socioecon√≥mico de trastornos mentales
- Investigaci√≥n en salud mental infantil y adolescente

√Åreas espec√≠ficas:
- Depresi√≥n y ansiedad
- Trastornos relacionados con violencia
- Salud mental en poblaciones vulnerables
- Intervenciones basadas en comunidad

3. NUEVAS TECNOLOG√çAS EN SALUD
Innovaciones:
- Desarrollo de dispositivos m√©dicos adaptados al contexto local
- Implementaci√≥n de telemedicina en √°reas rurales
- Investigaci√≥n en inteligencia artificial para diagn√≥sticos
- Aplicaciones m√≥viles para seguimiento de pacientes

Proyectos tecnol√≥gicos:
- Sistemas de monitoreo remoto
- Plataformas de educaci√≥n m√©dica digital
- Herramientas de diagn√≥stico por imagen
- Bases de datos cl√≠nicos integrados

4. ENFERMEDADES CR√ìNICAS NO TRANSMISIBLES
Enfoque integral:
- Diabetes mellitus tipo 2
- Hipertensi√≥n arterial
- Enfermedades cardiovasculares
- Obesidad y s√≠ndrome metab√≥lico

Estrategias de investigaci√≥n:
- Estudios de prevalencia e incidencia
- Factores de riesgo en poblaci√≥n paname√±a
- Evaluaci√≥n de intervenciones preventivas
- An√°lisis de costos en salud p√∫blica

5. SALUD INFANTIL
√Åreas de investigaci√≥n:
- Nutrici√≥n y desarrollo infantil temprano
- Programas de vacunaci√≥n y su efectividad
- Enfermedades pedi√°tricas prevalentes
- Desarrollo neurol√≥gico y cognitivo

Proyectos espec√≠ficos:
- Estudios de crecimiento y desarrollo
- Investigaci√≥n en lactancia materna
- Prevenci√≥n de enfermedades infecciosas
- Salud mental infantil

6. ENFERMEDADES INFECCIOSAS Y MEDICINA TROPICAL
Especializaci√≥n en:
- Enfermedades tropicales end√©micas
- Enfermedades emergentes y reemergentes
- Resistencia antimicrobiana
- Epidemiolog√≠a de enfermedades vectoriales

Investigaciones actuales:
- Dengue, Zika y Chikungunya
- Tuberculosis y VIH
- Enfermedades parasitarias
- Vigilancia epidemiol√≥gica

7. MEDICAMENTOS Y TERAPIAS FARMACOL√ìGICAS
Investigaci√≥n farmacol√≥gica:
- Farmacovigilancia en poblaci√≥n paname√±a
- Estudios de eficacia y seguridad de medicamentos
- Desarrollo de protocolos terap√©uticos
- Investigaci√≥n en medicina tradicional

√Åreas de trabajo:
- Efectos adversos de medicamentos
- Interacciones farmacol√≥gicas
- Farmacogen√©tica
- Adherencia terap√©utica

METODOLOG√çA DE INVESTIGACI√ìN

ENFOQUE MULTIDISCIPLINARIO
- Colaboraci√≥n entre diferentes especialidades m√©dicas
- Integraci√≥n de ciencias b√°sicas y cl√≠nicas
- Participaci√≥n de epidemi√≥logos, bioestad√≠sticos y metod√≥logos
- Cooperaci√≥n con ciencias sociales y salud p√∫blica

EST√ÅNDARES DE CALIDAD
- Protocolos basados en buenas pr√°cticas cl√≠nicas
- Revisi√≥n √©tica de todos los proyectos
- Supervisi√≥n metodol√≥gica especializada
- Publicaci√≥n en revistas indexadas

PARTICIPACI√ìN ESTUDIANTIL
- Integraci√≥n de estudiantes de medicina en proyectos
- Supervisi√≥n acad√©mica especializada
- Oportunidades de co-autor√≠a en publicaciones
- Presentaci√≥n en congresos nacionales e internacionales

COLABORACIONES Y REDES

COLABORACIONES NACIONALES
- Universidad de Panam√°
- Hospital Nacional
- Ministerio de Salud
- Caja de Seguro Social
- Instituto Gorgas

COLABORACIONES INTERNACIONALES
- Redes de investigaci√≥n latinoamericanas
- Proyectos multic√©ntricos regionales
- Intercambio acad√©mico internacional
- Participaci√≥n en consorcios de investigaci√≥n

IMPACTO ESPERADO
- Mejora en la toma de decisiones de salud p√∫blica
- Desarrollo de capacidades locales de investigaci√≥n
- Contribuci√≥n a pol√≠ticas nacionales de salud
- Fortalecimiento del sistema sanitario paname√±o
`,
  url: "https://www.instagram.com/ciimedpanama/",
  version: "1.0"
};

async function uploadToRAG(documentData) {
  try {
    // Hacer login como admin
    const loginResponse = await fetch('http://localhost:3000/api/admin/login', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ password: 'ciimed2024' })
    });

    if (!loginResponse.ok) {
      throw new Error('Error en login admin');
    }

    // Obtener cookies
    const setCookieHeader = loginResponse.headers.get('set-cookie');
    
    // Subir documento
    const uploadResponse = await fetch('http://localhost:3000/api/ingest', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Cookie': setCookieHeader || ''
      },
      body: JSON.stringify(documentData)
    });

    if (uploadResponse.ok) {
      const result = await uploadResponse.json();
      console.log(`‚úÖ "${documentData.title}" subido exitosamente`);
      console.log(`   - Chunks creados: ${result.stats.chunks}`);
      console.log(`   - Embeddings: ${result.stats.embeddings}`);
      return true;
    } else {
      const error = await uploadResponse.text();
      console.error(`‚ùå Error subiendo "${documentData.title}":`, error);
      return false;
    }

  } catch (error) {
    console.error(`‚ùå Error con "${documentData.title}":`, error.message);
    return false;
  }
}

async function uploadAllData() {
  console.log('üöÄ Iniciando carga de informaci√≥n de CIIMED al RAG...\n');
  
  const documents = [ciimedInfo, contactInfo, researchPrograms];
  let successCount = 0;
  
  for (const doc of documents) {
    const success = await uploadToRAG(doc);
    if (success) successCount++;
    
    // Esperar un poco entre uploads
    await new Promise(resolve => setTimeout(resolve, 1000));
  }
  
  console.log(`\nüìä Resumen:`);
  console.log(`   - Documentos subidos: ${successCount}/${documents.length}`);
  console.log(`   - Estado: ${successCount === documents.length ? '‚úÖ Completo' : '‚ö†Ô∏è  Parcial'}`);
  
  if (successCount === documents.length) {
    console.log('\nüéâ ¬°Toda la informaci√≥n de CIIMED ha sido cargada al chatbot!');
    console.log('   El chatbot ahora puede responder preguntas sobre:');
    console.log('   ‚Ä¢ Informaci√≥n general del CIIMED');
    console.log('   ‚Ä¢ Programas de investigaci√≥n');
    console.log('   ‚Ä¢ Contacto y ubicaci√≥n');
    console.log('   ‚Ä¢ √Åreas de especializaci√≥n');
  }
}

// Ejecutar solo si es llamado directamente
if (require.main === module) {
  uploadAllData();
}

module.exports = { uploadAllData, ciimedInfo, contactInfo, researchPrograms };